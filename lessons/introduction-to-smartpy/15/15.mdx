---
title: Ending 
chapter: Chapter 15
slug: chapter-15
editor:
  showEditor: false
  language: python
  startingCode: |
    import smartpy as sp

    class Cryptobot(sp.Contract):
    
        def __init__(self, manager_address, life_state):
            
            self.init(
                bot_manager = manager_address,
                name = "terminator",
                is_alive = life_state,
                
                coordinate_x = sp.int(0), 
                coordinate_y = sp.nat(0), 
                
                plasma_bullet_count = 5,

                record_alien_kills = {
                    "simple_alien": sp.nat(0), 
                    "boss_alien": sp.nat(0), 
                }
                
            )

        @sp.entry_point
        def change_name(self, new_name):
            sp.verify(
                self.data.bot_manager == sp.sender, 
                message = "Error: non manager call"
            )

            self.data.name = new_name
        
        @sp.entry_point
        def move_horizontally(self, update_to):
            sp.verify(
                self.data.bot_manager == sp.sender, 
                message = "Error: non manager call"
            )
                
            self.data.coordinate_x += update_to
        
        @sp.entry_point
        def move_vertically(self, update_to):
            
            sp.verify(
                self.data.bot_manager == sp.sender, 
                message = "Error: non manager call"
            )
                
            self.data.coordinate_y += update_to

            
        @sp.entry_point
        def shoot_alien(self, alien_type):
            
            sp.verify(
                self.data.bot_manager == sp.sender, 
                message = "Error: non manager call"
            )

            self.data.plasma_bullet_count -= 1
            
            self.data.record_alien_kills[alien_type] += 1

        
    @sp.add_test(name = "Ending")
    def test():
        scenario = sp.test_scenario()
        
        ## Class Invokation
        my_address = sp.address("tz1Syu3KacZ8cy4286a4vaCeoMtwqVKHkaoj")

        test_bot =  Cryptobot(manager_address = my_address, life_state = True)
        
        ## Testing contract
        scenario += test_bot
        
        scenario += test_bot.change_name("punky terminator").run(sender = my_address)
        
        scenario.verify(test_bot.data.is_alive == True)
        
        scenario += test_bot.move_horizontally(2).run(sender = my_address)
        
        scenario += test_bot.move_vertically(1).run(sender = my_address)
        
        scenario += test_bot.shoot_alien("simple_alien").run(sender = my_address)
        
        scenario += test_bot.shoot_alien("boss_alien").run(sender = my_address)
        

  answer: |
    import smartpy as sp

    class Cryptobot(sp.Contract):
    
        def __init__(self, manager_address, life_state):
            
            self.init(
                bot_manager = manager_address,
                name = "terminator",
                is_alive = life_state,
                
                coordinate_x = sp.int(0), 
                coordinate_y = sp.nat(0), 
                
                plasma_bullet_count = 5,

                record_alien_kills = {
                    "simple_alien": sp.nat(0), 
                    "boss_alien": sp.nat(0), 
                }
                
            )

        @sp.entry_point
        def change_name(self, new_name):
            sp.verify(
                self.data.bot_manager == sp.sender, 
                message = "Error: non manager call"
            )

            self.data.name = new_name
        
        @sp.entry_point
        def move_horizontally(self, update_to):
            sp.verify(
                self.data.bot_manager == sp.sender, 
                message = "Error: non manager call"
            )
                
            self.data.coordinate_x += update_to
        
        @sp.entry_point
        def move_vertically(self, update_to):
            
            sp.verify(
                self.data.bot_manager == sp.sender, 
                message = "Error: non manager call"
            )
                
            self.data.coordinate_y += update_to

            
        @sp.entry_point
        def shoot_alien(self, alien_type):
            
            sp.verify(
                self.data.bot_manager == sp.sender, 
                message = "Error: non manager call"
            )

            self.data.plasma_bullet_count -= 1
            
            self.data.record_alien_kills[alien_type] += 1

        
    @sp.add_test(name = "Ending")
    def test():
        scenario = sp.test_scenario()
        
        ## Class Invokation
        my_address = sp.address("tz1Syu3KacZ8cy4286a4vaCeoMtwqVKHkaoj")

        test_bot =  Cryptobot(manager_address = my_address, life_state = True)
        
        ## Testing contract
        scenario += test_bot
        
        scenario += test_bot.change_name("punky terminator").run(sender = my_address)
        
        scenario.verify(test_bot.data.is_alive == True)
        
        scenario += test_bot.move_horizontally(2).run(sender = my_address)
        
        scenario += test_bot.move_vertically(1).run(sender = my_address)
        
        scenario += test_bot.shoot_alien("simple_alien").run(sender = my_address)
        
        scenario += test_bot.shoot_alien("boss_alien").run(sender = my_address)


---

### Intro: 

![Alt Text](https://media.giphy.com/media/BQAk13taTaKYw/giphy.gif)

Wow! Great job learner!

You have finally assembled a alien-killing cryptobot!

As you can see on the right side, we have assembled all the pieces of your `Cryptobot` contract together so that you can review it's working one final time before you send your `Cryptobot` to battle! ⚔️



You can also tinker around with the final code on [SmartPy’s online IDE](https://smartpy.io/demo/index.html?code=eJzVVU2P0zAQvedXWNlLIkpFlwWtKlVCqlYCrTix4gBClptMW9PEDrbTxYv474zz0cRNqsJqJcCn2H7zPPNmMsPzQipDdM6UKSxhmugiCJKMaU2WyhZGrqSJdDFdSmEUS0w8DwKCK4U1oZQLbiiNNGTrCcmZYBtQlKWpAq0nJONroNowA2hFmnX4cEZTRxAdjtzC92jDRBYDTg8qWA6ICQ2onAtmpAp9ANeUZXzvQJ0vPsTbJFKq1DEB_Y42GDYXJnoRT07CbA3D7yHM2xQoac7oqswyMDSRpTBo@moSeCgFCVI7p0HQHc8yjaAfHsStUPO8yKDGhfOTHlTYldT6LPLnuOdx7d4bNAPMv6WFREUOBZBsmdgAdXloakDAfbXtJRxt96D42vp5rtKfMsOmXsYrOTWIFNSRiznmHzEu4TdKSTUnQoq2QEjCsiw89tt_pymX1sXgEOmp8HK5B7qVij9g8SO_bYIsi9Tl3si_HuVo0ro3vXp@tugc_83YMSLDkzOR_zcSWF8CP4BTOuitRK@r36fRoP45jS3Gu9q_Uu1jDef5gsxONOLKZth@PnfRfnHyzeqnAicX9mRqQJuo7cM3ApXehHHghKtuGoV0AoIpLutm6W5oexTFXS1eXJBlNXneib3cMcOlqM5z2_b_mqDZRKF5mH2w5ctblny6TuzV5fVrdrVnS5Dvzf23j7dvd0x@DRt1qldRfKToTbaj@eImjh0bYHhxp0rwnb1DSgwY50E9G_1YUa32zc5q7Hbab6NhUYqdJb2RFk9V6WrPFYnnXzykbWvvQF2ltRuDgyhG_Rn2vcs_cWLI1esjs0cz9f9EfwA@DWVvTp4j_AX6Oq8L). Try running the test by clicking on the ▶️ button!


## Fighting Time! 

As and when you are ready, click on "Finish" button! 

It's time to kill some aliens! 

![Alt Text](https://media.giphy.com/media/4Sm7D7rlopgqs/giphy.gif)