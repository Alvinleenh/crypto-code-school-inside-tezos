---
title: Tinkering with maps in SmartPy
chapter: Chapter 11
slug: chapter-11
filterBy: lesson-1
editor:
  showEditor: true
  language: python
  startingCode: |
    import smartpy as sp

    class Plant(sp.Contract):
        def __init__(self, life_state):
            self.init(
                name = "peashooter",
                is_alive = life_state,
                coordinate_x = sp.int(0), 
                coordinate_y = sp.nat(0), 
                
                # Add bullet_seed_count with 5 bullets:

                
                # Add record_zombie_kills below:


                )
            
        @sp.entry_point
        def change_name(self, new_name):
            self.data.name = new_name
          
        @sp.entry_point
        def move_horizontally(self, update_to):
            self.data.coordinate_x += update_to
            
        @sp.entry_point
        def move_vertically(self, update_to):
            self.data.coordinate_y += update_to

                
        # Add shoot_zombie function below
        @sp.entry_point
        def shoot_zombie(self, zombie_type): 
            # Reduce bullet_seed_count by 1

                
            # Record the zombie that was shot
            # and then increase it by 1 below
        
            
    @sp.add_test(name = "Test shooting")
    def test():
        scenario = sp.test_scenario()
        
        plant_test_contract =  Plant(life_state = True)
        
        scenario += plant_test_contract

        # Use shoot_zombie to kill 1 simple zombies and 1 boss zombie

  answer: |  
    import smartpy as sp

    class Plant(sp.Contract):
        def __init__(self, life_state):
            self.init(
                name = "peashooter",
                is_alive = life_state,
                coordinate_x = sp.int(0), 
                coordinate_y = sp.nat(0), 
               
                # Add bullet_seed_count with 5 bullets:
                bullet_seed_count = 5,
                
                # Add record_zombie_kills below:
                record_zombie_kills = {
                    "simple_zombie": sp.nat(0),
                    "boss_zombie": sp.nat(0)
                }

                )
            
        @sp.entry_point
        def change_name(self, new_name):
            self.data.name = new_name
       
        @sp.entry_point
        def move_horizontally(self, update_to):
            self.data.coordinate_x += update_to
        
        @sp.entry_point
        def move_vertically(self, update_to):
            self.data.coordinate_y += update_to

            
        # Add shoot_zombie function below
        @sp.entry_point
        def shoot_zombie(self, zombie_type): 
            # Reduce bullet_seed_count by 1
            self.data.bullet_seed_count -= 1
            
            # Record the zombie that was shot
            # and then increase it by 1 below
            self.data.record_zombie_kills[zombie_type] += 1
        
        
    @sp.add_test(name = "Test shooting")
    def test():
        scenario = sp.test_scenario()
        
        plant_test_contract =  Plant(life_state = True)
        
        scenario += plant_test_contract
      
        # Use shoot_zombie to kill 1 simple zombies and 1 boss zombie
        scenario += plant_test_contract.shoot_zombie("simple_zombie")
        scenario += plant_test_contract.shoot_zombie("boss_zombie")
---

### Intro: 
Let us quickly understand how maps are handled under the hood in SmartPy! 

In the later half of the chapter, you will adding the ability to shoot as well as the ability to record zombie kills! 

<img src="https://media.giphy.com/media/lPS3b0XePyBxiX2uUq/giphy.gif" alt="drawing" width="500"/>

## Study Time: 

### Maps:

Maps are containers that store elements formed by a combination of a key and a mapped value. An example: 

```python
{‚Äúa‚Äù: 1, ‚Äúb‚Äù: 2} 
```

You might recognize the familiarity with Python‚Äôs [dictionaries](https://docs.python.org/3/tutorial/datastructures.html#dictionaries). 

Maps are represented by type `sp.TMap(key, value)` in SmartPy. 

```python
## record_zombie_kills is a variable that records your kill count for various types of zombies. 
self.init(
            record_zombie_kills = {
                    "simple_zombie": sp.nat(0), 
                    "boss_zombie": sp.nat(0)
            }
         )

## Update simple_zombie_kill_count by 1. 
self.data.record_zombie_kills["simple_zombie"] += 1  

## You can also explicitly give map type by doing the following:
self.init(record_zombie_kills = sp.map({...}) )
```



Notes: 

1. Since we know beforehand that kill counts cannot be negative, kill counts are given the type `sp.TNat` using `sp.nat`
2. As you can see, map is a container data type that can hold simple data types like strings, int, boolean etc. 
3. By that logic, the inferred type of `record_zombie_kills` is  `sp.TMap(sp.TString, sp.TNat)`
5. You can read more in depth about how SmartPy handles maps [here](https://smartpy.io/demo/reference.html#_maps_and_big_maps). 



 

## #buidl-ing time:

#### New Feature request:

Your `Plant` seems to be missing the most important ability: the ability to kill! Without it your plant is as good as dead üíÄ

Let‚Äôs also add the ability to record zombie kills. This is going to be important to analyze how your `Plant` is fairing in respect to other `Plant`'s in the world. 

 

#### Step-by-step walkthrough: 

1. Add `bullet_seed_count ` to our contract's storage and initialize with <span class="string-highlight">5</span> bullets. 
2. Add `record_zombie_kills` to our contract's storage and initialize with: 
    * key `simple_zombie` and it's value as <span class="string-highlight">0</span> of type `sp.TNat`

    * key `boss_zombie` and it's value as <span class="string-highlight">0</span> of type `sp.TNat`

3. Complete the `shoot_zombie` function's code by adding code: 
    * to reduce `bullet_seed_count` by <span class="string-highlight">1</span>.
    * use `zombie_type` argument as key to access it's value in `record_zombie_kills` map and increase it by  <span class="string-highlight">1</span>. 


 

#### Testing our code:

Let us test our `shoot_zombie` function by  shoot <span class="string-highlight">2</span> bullet seeds, <span class="string-highlight">1</span> aimed at simple zombie and <span class="string-highlight">1</span>  aimed towards boss zombie respectively: 

1. Call `shoot_zombie` and pass it the value of <span class="string-highlight">"simple_zombie"</span>
2. Call `shoot_zombie` and pass it the value of <span class="string-highlight">"boss_zombie"</span>

<br />

When you‚Äôre finished:

1. Click on ‚ÄúCheck‚Äù to check your submission with the correct answer.
2. Click on ‚ÄúShow Answer‚Äù in case you get stuck.


You can also tinker around with the final code on [SmartPy‚Äôs online IDE](https://smartpy.io/demo/index.html?code=eJydVMGO2yAQvfsrRsklVtOoOewlUqRW_YGq2p6qCmE8WaNisAAn9Vb99w42ic3a20bLCYY382aGx8i6MdaDq7n1TQfcgWuyTCjuHHxRXPuNa3afjfaWC58fMqBV4gkYk1p6xjYO1WkLSp6QOc89RkxY4WoXYJubKSzNa4QjrBrkrjLGo11tE4B0jCt5DqAxbgoRxthSarKzXwSjHCWl@iHfwmuwboDRfg5LDmv4VJZQtEqhZw6xZMK02sNF@goe4oU7JD5z9BEeiOR_LBYFJcieTV1IZD@lUg4KVOaShl@CHeF3gglr5WTdKIzA1WFS8BxbGOcWkAnwT5aWMN72m4_khSSNjjWG@n8Th6i4fkIWHjrqQ@OlP75UR8k930VBXDHZHQy1OSOrjJXPJE2uVBd52qYMj@3NIlGimnfHEX1fWT3pGa2X4i2UXUo518agif5PxIeBU6uFl0YPqvhndlO_mFoUjO8aavyovzV8xbIVuCDbooOTtPTlKorVmxZqmru9P8L@FbEHsqBe8BXGhGjL6T@FWUM0EyTXPUyD1MLSdECQfUr7SflpKgs_4_uk6h@h5fvsms_4zKGJvCyZR@c314H0SIehjVI_rfIsdLUHxJd1AjW30gyTJNywq2mTjwRNGJt9ZOrOMDjJI07TcaCR7dG2OHG8xaekF4KMwDV8o94kQvEGQvXUqmEGxFa7vqfUP_rs0XQP1S4R04uxkr8hwnTYxIr_Aglr7UY-). Try running the test by clicking on the ‚ñ∂Ô∏è button!


